{"version":3,"sources":["commands/send.js"],"names":[],"mappings":";;;;;;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACzC,IAAI,cAAc,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAChD,IAAI,aAAa,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;;AAExD,IAAI,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACpC,IAAI,YAAY,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC7C,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACnC,IAAI,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;AAEpC,MAAM,CAAC,OAAO,GAAG;AACf,MAAI,EAAE,MAAM;AACZ,MAAI,EAAE,CAAC,aAAa,CAAC;AACrB,SAAO,GACL,CAAC,UAAU,EAAE,mEAAmE,CAAC,EACjF,CAAC,MAAM,EAAE,0CAA0C,CAAC,EACpD,CAAC,QAAQ,EAAE,yCAAyC,CAAC,4BACjD,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAC7B;AACD,aAAW,EAAE,0FAAyF;AACtG,MAAI,EAAE,2DAA2D;AACjE,UAAQ,oBAAE,WAAgB,GAAG,EAAE;AAC7B,QAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AACpB,QAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;AAClB,QAAI,GAAG,GAAG,IAAI,CAAC;;AAEf,QAAI,GAAG,GAAG,MAAM,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;;AAE7C,OAAG,CAAC,iBAAiB,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;;AAEtD,QAAI,SAAS,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;AACvC,QAAI,CAAC,SAAS,EAAE;AACd,eAAS,GAAG,MAAM,OAAO,CAAC,uBAAuB,EAAE,CAAC;KACrD;;AAED,QAAI,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;AACxB,QAAI,IAAI,EAAE;AACR,SAAG,CAAC,4BAA4B,CAAC,CAAC;AAClC,mBAAa,CAAC,KAAK,EAAE,CAAC;AACtB,UAAI;AACF,YAAI,EAAE,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;OAC9C,CAAC,OAAO,CAAC,EAAE;AACV,cAAM,YAAY,CAAC,qBAAqB,EAAE,GAAG,EAAE,gDAAgD,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;OAC9G,SAAS;AACR,qBAAa,CAAC,IAAI,EAAE,CAAC;OACtB;AACD,SAAG,CAAC,KAAK,CAAC,CAAC;KACZ;;AAED,QAAI,SAAS,EAAE;AACb,YAAM,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;KAC3C,MAAM;AACL,SAAG,CAAC,IAAI,CAAC,iEAAgE,CAAC,CAAC;KAC5E;GACF,CAAA,EACF,CAAC","file":"commands/send.js","sourcesContent":["var crayon = require('@ccheever/crayon');\nvar qrcodeTerminal = require('qrcode-terminal');\nvar simpleSpinner = require('@exponent/simple-spinner');\n\nvar askUser = require('../askUser');\nvar CommandError = require('./CommandError');\nvar log = require('../log');\nvar sendTo = require('./sendTo');\nvar urlOpts = require('./urlOpts');\nvar urlUtil = require('../urlUtil');\n\nmodule.exports = {\n  name: 'send',\n  args: ['[recipient]'],\n  options: [\n    ['--sendTo', \"Specifies the mobile number or e-mail address to send this URL to\"],\n    ['--qr', \"Will also generate a QR code for the URL\"],\n    ['--test', \"Will test to make sure the URL is valid\"],\n    ...(urlOpts.options('ngrok')),\n  ],\n  description: \"Sends a link you can load the app you're developing to a phone number or e-mail address\",\n  help: \"You must have the server running for this command to work\",\n  runAsync: async function (env) {\n    var argv = env.argv;\n    var args = argv._;\n    var err = null;\n\n    var url = await urlUtil.urlFromEnvAsync(env);\n    \n    log(\"Your URL is\\n\\n\" + crayon.underline(url) + \"\\n\");\n\n    var recipient = argv.sendTo || args[1];\n    if (!recipient) {\n      recipient = await askUser.askForMobileNumberAsync();\n    }\n\n    var test = !argv.notest;\n    if (test) {\n      log(\"Testing loading the URL...\");\n      simpleSpinner.start();\n      try {\n        var ok = await urlUtil.testUrlAsync(httpUrl);\n      } catch (e) {\n        throw CommandError('RUN_EXP_START_FIRST', env, \"You may need to run `exp start` to get a URL\\n\" + e.message);\n      } finally {\n        simpleSpinner.stop();\n      }\n      log(\"OK.\");\n    }\n\n    if (recipient) {\n      await sendTo.sendUrlAysnc(url, recipient);\n    } else {\n      log.gray(\"(Not sending anything because you didn't specify a recipient.)\");\n    }\n  },\n};\n"],"sourceRoot":"/source/"}