{"version":3,"sources":["commands/whoami.js"],"names":[],"mappings":";;;;AAAA,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAI,YAAY,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC7C,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAI,YAAY,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAE9C,MAAM,CAAC,OAAO,GAAG;AACf,MAAI,EAAE,QAAQ;AACd,aAAW,EAAE,+DAA+D;AAC5E,UAAQ,oBAAE,WAAgB,GAAG,EAAE;AAC7B,QAAI,YAAY,GAAG,MAAM,YAAY,CAAC,SAAS,EAAE,CAAC;AAClD,QAAI,CAAC,YAAY,EAAE;AACjB,YAAM,YAAY,CAAC,kBAAkB,EAAE,GAAG,EAAE,wBAAuB,CAAC,CAAC;KACtE;;QAEI,QAAQ,GAAoB,YAAY,CAAxC,QAAQ;QAAE,cAAc,GAAI,YAAY,CAA9B,cAAc;;AAE7B,QAAI,MAAM,GAAG,MAAM,GAAG,CAAC,eAAe,CAAC,SAAS,EAAE,EAAC,QAAQ,EAAR,QAAQ,EAAE,cAAc,EAAd,cAAc,EAAC,CAAC,CAAC;;AAE9E,QAAI,MAAM,CAAC,IAAI,EAAE;AACf,SAAG,CAAC,cAAc,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC1C,aAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,aAAO,MAAM,CAAC,IAAI,CAAC;KACpB,MAAM;AACL,YAAM,YAAY,CAAC,SAAS,EAAE,GAAG,EAAE,yCAAyC,CAAC,CAAC;KAC/E;GAEF,CAAA,EACF,CAAC","file":"commands/whoami.js","sourcesContent":["var api = require('../api');\nvar CommandError = require('./CommandError');\nvar log = require('../log');\nvar userSettings = require('../userSettings');\n\nmodule.exports = {\n  name: 'whoami',\n  description: \"Checks with the server and then says who you are logged in as\",\n  runAsync: async function (env) {\n    var settingsData = await userSettings.readAsync();\n    if (!settingsData) {\n      throw CommandError('NO_SETTINGS_DATA', env, \"You aren't logged in.\");\n    }\n\n    var {username, hashedPassword} = settingsData;\n\n    var result = await api.callMethodAsync('adduser', {username, hashedPassword});\n\n    if (result.user) {\n      log(\"Logged in as\", result.user.username);\n      console.log(result.user);\n      return result.user;\n    } else {\n      throw CommandError('NO_USER', env, \"No such user or your password is wrong.\");\n    }\n\n  },\n};\n"],"sourceRoot":"/source/"}