{"version":3,"sources":["exp.js"],"names":[],"mappings":"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","file":"exp.js","sourcesContent":["#!/usr/bin/env node\n\nvar child_process = require('child_process');\nvar co = require('co');\nvar crayon = require('@ccheever/crayon');\nvar instapromise = require('instapromise');\nvar minimist = require('minimist');\nvar ngrok = require('ngrok');\nvar path = require('path');\nvar request = require('request');\n\nvar URL_FILE = '.exponent.url';\n\nmodule.exports = function(command, argv) {\n  switch (command) {\n\n    case 'help':\n    case void 0:\n      return co(function *() {\n        console.log(\n          \"Usage: exp <command>\\n\" +\n          \"\\n\" +\n          \"where <command> is one of:\\n\" +\n          \"    serve, send, snapshot, help\\n\" +\n          \"\\n\" +\n          \"exp help <cmd>     search for help on <cmd>\\n\");\n      });\n      break;\n\n    case 'send':\n      return co(function *() {\n        var urlFilePath = path.join(__dirname, URL_FILE);\n        var url;\n        var err = null;\n        try {\n          url = yield fs.promise.readFile(url, 'utf8');\n          try {\n            var [response, body] = yield request.promise.get(url);\n          } catch (e) {\n            err = new Error(\"Couldn't reach the URL \" + url + \". Did you kill your server?\");\n          }\n        } catch (e) {\n          err = new Error(\"You need to run `exp serve` before you have a URL you can send\");\n        }\n        if (err) {\n          console.error(err);\n          throw err;\n        } else {\n          console.log(\"url=\", url);\n        }\n      });\n      break;\n\n    case 'serve':\n      return co(function*() {\n        var ngrokAuthToken, ngrokSubdomain, packager, port, url, urlP;\n        ngrokSubdomain = argv['ngrok-subdomain'];\n        ngrokAuthToken = argv['ngrok-auth-token'];\n        port = argv.port;\n        if (port == null) {\n          port = 9000 + Math.floor(Math.random() * 1000);\n        }\n        urlP = ngrok.promise.connect({\n          port: port,\n          authtoken: ngrokAuthToken,\n          subdomain: ngrokSubdomain\n        });\n        var pp = path.join(__dirname, 'node_modules', 'react-native', 'packager', 'packager.sh');\n        var root = path.resolve(__dirname, '..', '..');\n        packager = child_process.spawn(pp, [\"--port=\" + port, \"--root=\" + root, \"--assetRoots=\" + root,], {\n          stdio: [process.stdin, process.stdout, process.stderr],\n        });\n        url = (yield [urlP])[0];\n        var urlFilePath = path.join(__dirname, URL_FILE);\n        crayon.log(\"Started packager and ngrok\\nYour URL is\\n\" + (crayon.bold(url)) + \"\\n\");\n        yield fs.promise.writeFile(urlFilePath, url);\n      });\n      break;\n\n    default:\n      return console.error(\"The only command that works right now is `start`\");\n      break;\n\n  }\n\n};\n\nif (require.main === module) {\n  var argv = minimist(process.argv.slice(2));\n  module.exports(argv._[0], argv);\n}\n"],"sourceRoot":"/source/"}